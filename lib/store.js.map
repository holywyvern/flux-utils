{"version":3,"sources":["store.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEM,K;AAEF,yBAAmD;AAAA,YAArC,OAAqC,QAArC,OAAqC;AAAA,gCAA5B,OAA4B;AAAA,YAA5B,OAA4B,gCAAlB,EAAkB;AAAA,8BAAd,KAAc;AAAA,YAAd,KAAc,8BAAN,EAAM;;AAAA;;AAC/C,YAAI,QAAQ,KAAK,iBAAL,CAAuB,KAAvB,CAAZ;AACA,aAAK,cAAL,CAAoB,OAApB,EAA6B,OAA7B,EAAsC,KAAtC;AACH;;;;0CAEiB,K,EAAO;AACrB,gBAAI,aAAa,wBAAK,KAAL,CAAjB;AACA,gBAAI,SAAa,6BAAjB;AACA,mBAAO,gBAAP,CAAwB,IAAxB,EAA8B;AAC1B,wBAAQ;AACJ,uBADI,iBACE;AACF,+BAAO,MAAP;AACH;AAHG,iBADkB;AAM1B,uBAAQ;AACJ,uBADI,iBACE;AACF,+BAAO,wBAAK,UAAL,CAAP;AACH;AAHG;AANkB,aAA9B;AAYA,mBAAO;AACH,oBAAI,KAAJ,GAAY;AACR,2BAAO,wBAAK,UAAL,CAAP;AACH,iBAHE;AAIH,oBAAI,KAAJ,CAAU,KAAV,EAAiB;AACb,iCAAa,wBAAK,KAAL,CAAb;AACA,2BAAO,IAAP,CAAY,QAAZ;AACH;AAPE,aAAP;AASH;;;uCAEc,O,EAAS,O,EAAS,K,EAAO;AAAA;AAAA;AAAA;;AAAA;AACpC,qCAAmB,QAAQ,IAAR,EAAnB,8HAAmC;AAAA,wBAA1B,MAA0B;;AAC/B,wBAAI,WAAW,QAAQ,MAAR,EAAgB,IAAhB,CAAqB,KAArB,CAAf;AACA,4BAAQ,UAAR,CAAmB,EAAnB,CAAsB,MAAtB,EAA8B,QAA9B;AACH;AAJmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKvC;;;;;;kBAIU,K","file":"store.js","sourcesContent":["import copy         from 'deep-copy';\r\nimport EventManager from 'generic-events';\r\n\r\nclass Store {\r\n\r\n    constructor({ actions, methods = {}, state = {} }) {\r\n        let proxy = this._defineProperties(state);\r\n        this._defineActions(actions, methods, proxy);\r\n    }\r\n\r\n    _defineProperties(state) {\r\n        let storeState = copy(state);\r\n        let events     = new EventManager();\r\n        Object.defineProperties(this, {\r\n            events: { \r\n                get() { \r\n                    return events; \r\n                } \r\n            },\r\n            state:  { \r\n                get() { \r\n                    return copy(storeState); \r\n                }\r\n            }\r\n        });\r\n        return {\r\n            get state() {\r\n                return copy(storeState); \r\n            },\r\n            set state(value) {\r\n                storeState = copy(value);\r\n                events.fire('change');\r\n            }\r\n        };\r\n    }\r\n\r\n    _defineActions(actions, methods, proxy) {\r\n        for (let action of actions.list()) {\r\n            let callback = methods[action].bind(proxy);\r\n            actions.dispatcher.on(action, callback);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Store;"],"sourceRoot":"/source/"}